(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[8],{1958:function(e,t,s){e.exports={friends:"Dialogs_friends__28ATF",friendsMobile:"Dialogs_friendsMobile__SanIZ",friends__friendDataContainer:"Dialogs_friends__friendDataContainer__3N7uj",friends__friendDataContainer_mobile:"Dialogs_friends__friendDataContainer_mobile__2rsP-",friends__friendData:"Dialogs_friends__friendData__SO3LQ",friends__myLogin:"Dialogs_friends__myLogin__26hbh",dialogsContainer:"Dialogs_dialogsContainer__1jupJ",friendData__logo:"Dialogs_friendData__logo__wS3Eg",friendData__text:"Dialogs_friendData__text__2GMuB",messageBlock:"Dialogs_messageBlock__BJOaI"}},1972:function(e,t,s){e.exports={user:"Dialog_user__1-Ber",user__content:"Dialog_user__content__1lZ7U",user__logo:"Dialog_user__logo__1WwvS",user__login:"Dialog_user__login__1Dzp0"}},1973:function(e,t,s){e.exports={message:"Message_message__3BgB8",message__body:"Message_message__body__1AnZB",myMessage:"Message_myMessage__3sYbg",message__image:"Message_message__image__hlwZS",message__content:"Message_message__content__lAnhv",myMessageContent:"Message_myMessageContent__1jhh7",unViewed:"Message_unViewed__1JGZL",disabled:"Message_disabled__2RGrK"}},2001:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),i=s(1964),c=s(1963),r=s(180),o=s(1958),d=s.n(o),l=s(51),j=s(72),u=s(71),g=s(1972),b=s.n(g),_=s(2005),m=s(9),f=function(e){var t=e.logo,s=e.hasNewMessages,n=e.newMessagesCount,a=e.id,i=e.login;return Object(m.jsx)("div",{className:b.a.user,children:Object(m.jsx)(u.c,{to:"/dialogs/".concat(a),children:Object(m.jsxs)("div",{className:b.a.user__content,children:[Object(m.jsx)("div",{className:b.a.user__logo,children:s?Object(m.jsx)(_.a,{count:n,children:Object(m.jsx)("img",{src:t||"https://agile.yakubovsky.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png",alt:"logo"})}):Object(m.jsx)("img",{src:t||"https://agile.yakubovsky.com/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png",alt:"logo"})}),Object(m.jsx)("div",{className:b.a.user__login,children:Object(m.jsx)("p",{children:i})})]})})})},h=s(98),O=function(e){return e.messagePage.dialogs},x=function(e){return e.messagePage.selectedDialog},p=function(e){return e.messagePage.isFetchingDialogs},v=function(e){return e.messagePage.isFetchingDialog},y=function(e){return e.messagePage.deletingMessagesInProgress},D=function(e){return e.messagePage.isMessageSending},w=function(e){return e.messagePage.isDialogsReceived},M=function(e){return e.messagePage.gettingMessageCount},N=s(151),C=function(e){e.isMobileVersion;var t=Object(l.d)(O);Object(n.useEffect)((function(){a(Object(h.f)())}),[]);var s=Object(l.d)(j.e),a=Object(l.c)(),i=Object(l.d)(p);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(c.a,{span:24,className:d.a.friends,children:i?Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:d.a.friends__myLogin,children:Object(m.jsx)("h2",{children:s})}),Object(m.jsx)("div",{style:{padding:"10px 10px 0 10px"},children:null===t||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(f,{hasNewMessages:e.hasNewMessages,id:e.id,newMessagesCount:e.newMessagesCount,logo:e.photos.small,login:e.userName},e.id)}))})]}):Object(m.jsx)(N.a,{fontSize:100})})})},I=s(130),S=s(154),k=function(e){var t=e.userId,s=Object(n.useState)(""),a=Object(I.a)(s,2),o=a[0],d=a[1],j=Object(l.d)(v),u=Object(l.c)(),g=Object(l.d)(D);return Object(m.jsx)(m.Fragment,{children:j&&Object(m.jsx)("div",{style:{maxWidth:"500px",bottom:0,padding:"0 10px"},children:Object(m.jsxs)(i.a,{children:[Object(m.jsx)(c.a,{span:24,children:Object(m.jsx)(S.a,{onChange:function(e){d(e.currentTarget.value)},value:o,rows:5,style:{marginBottom:"5px",resize:"none"}})}),Object(m.jsx)(c.a,{children:Object(m.jsx)(r.a,{style:{marginBottom:"10px"},disabled:g,onClick:function(){(null===o||void 0===o?void 0:o.trim())&&(t&&u(Object(h.i)(+t,o)),d(""))},children:"send"})})]})})})},A=s(36),B=s(7),F=s(1992),P=function(e){return{isAuth:e.auth.isAuth}};var T,z=s(156),V=s(15),J=s.n(V),L=s(28),R=s(1994),E=s(1973),H=s.n(E),U=s(1955),Z=s(1970),W=a.a.memo((function(e){var t=e.body,s=e.id,a=e.photo,i=e.senderId,c=e.viewed,r=e.userId,o=e.addedAt,d=Object(l.d)(j.c),g=Object(l.d)(y),b=Object(n.useState)(!1),_=Object(I.a)(b,2),f=_[0],O=_[1],x=Object(l.c)(),p=function(e){e.preventDefault(),x(Object(h.d)(r,s))},v=function(e){e.preventDefault(),x(Object(h.a)(r,s))},D=new Date(new Date(o)).toLocaleTimeString().split(":"),w=Object(I.a)(D,2),M=w[0],N=w[1];return Object(m.jsxs)("div",{className:H.a.message,children:[Object(m.jsx)(U.a,{content:function(){return Object(m.jsx)("div",{className:"".concat(g.includes(s)?H.a.disabled:""),children:d===i?Object(m.jsx)("a",{style:{display:"block",marginBottom:5},onClick:p,children:"Delete"}):Object(m.jsx)("a",{onClick:v,children:"To spam"})})},title:"Actions",trigger:"click",visible:f,onVisibleChange:function(e){return O(e)},children:Object(m.jsx)("span",{className:"".concat(g.includes(s)?H.a.disabled:""),style:{color:"#fff",cursor:"pointer"},children:"..."})}),Object(m.jsxs)("div",{className:"".concat(g.includes(s)?H.a.disabled:""," ").concat(H.a.message__body," ").concat(d===i?H.a.myMessage:""),children:[Object(m.jsx)("div",{className:H.a.message__image,children:d!==i?Object(m.jsxs)(u.b,{to:"/profile/".concat(i),children:[" ",a?Object(m.jsx)("img",{src:a,alt:"photo"}):Object(m.jsx)(Z.a,{style:{backgroundColor:"#87d068"},icon:Object(m.jsx)(R.a,{})})]}):""}),Object(m.jsxs)("div",{className:"".concat(H.a.message__content," ").concat(d===i?H.a.myMessageContent:""),children:[Object(m.jsxs)("span",{style:{marginBottom:0,marginRight:10,color:"#fff",display:"inline-block"},children:[t," "]}),Object(m.jsxs)("span",{style:{fontSize:"12px",color:"#dddddd"},children:[d===i&&c&&"\u2713\u2713"," ","".concat(+M+2,":").concat(N)]})]})]})]})})),G=function(e){var t=e.userId,s=e.items,n=e.date,a=e.photo,i=n.split("_"),c=Object(I.a)(i,3),r=c[0],o=c[1],d=c[2];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{style:{background:"rgb(186,183,183,0.6)",textAlign:"center",color:"#ddd",padding:"5px 0"},children:[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][+r]," ",o," ",["January","February","March","April","May","June","July","August","September","October","November","December"][+d]]}),null===s||void 0===s?void 0:s.map((function(e){if(t)return Object(m.jsx)(W,{addedAt:e.addedAt,userId:+t,body:e.body,senderId:e.senderId,photo:t&&e.senderId===+t?a:"",id:e.id,recipientId:e.recipientId,viewed:e.viewed,translatedBody:e.translatedBody,senderName:e.senderName},e.id)}))]})})})},Y=s(2e3),K=s(2008),Q=function(e){var t,s,a,i,c,r=e.userId,o=e.isMobileVersion,j=Object(l.d)(w);Object(n.useEffect)((function(){j||g(Object(h.f)())}),[]);var g=Object(l.c)();Object(n.useEffect)((function(){function e(){return(e=Object(L.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,g(Object(h.g)(+r,1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(){var e;null===y||void 0===y||null===(e=y.current)||void 0===e||e.scrollIntoView(),window.scrollTo(0,0)}))}),[r]);var b,_=Object(l.d)(x),f=_.items?function(e){for(var t=[],s=new Set,n=function(n){var a=e[n],i=new Date(a.addedAt).getDate(),c=new Date(a.addedAt).getDay(),r=new Date(a.addedAt).getMonth(),o="".concat(c,"_").concat(i,"_").concat(r);s.add(o),Array.from(s).forEach((function(e,s){e===o&&(t[s]?t[s].items.push(a):t[s]={date:e,items:[a]})}))},a=0;a<e.length;a++)n(a);return t}(_.items):[],p=Object(l.d)(O);r&&(b=p.find((function(e){return e.id===+r}))),Object(n.useEffect)((function(){return r&&(b=p.find((function(e){return e.id===+r}))),function(){g(h.e.cleanSelectedDialog())}}),[r]);var y=Object(n.useRef)(null),D=Object(n.useState)(!1),C=Object(I.a)(D,2),S=(C[0],C[1]),k=Object(l.d)(v),A=Object(l.d)(M),B=Math.ceil(_.totalCount/A),F=Object(n.useRef)(2),P=(null===(t=b)||void 0===t?void 0:t.lastUserActivityDate)&&new Date(b.lastUserActivityDate).setHours(new Date(b.lastUserActivityDate).getHours()+2);return Object(m.jsx)(m.Fragment,{children:k?Object(m.jsxs)("div",{style:{flex:"1 1 auto",position:"relative"},children:[Object(m.jsxs)("div",{className:"".concat(d.a.friends__friendDataContainer," ").concat(o?d.a.friends__friendDataContainer_mobile:""),children:[Object(m.jsxs)("div",{className:d.a.friends__friendData,children:[Object(m.jsx)("div",{className:d.a.friendData__logo,children:Object(m.jsx)("img",{style:{width:"40px",height:"40px",borderRadius:"50%"},src:(null===(s=b)||void 0===s||null===(a=s.photos)||void 0===a?void 0:a.small)?b.photos.small:"https://st4.depositphotos.com/9998432/24428/v/450/depositphotos_244284532-stock-illustration-person-gray-photo-placeholder-man.jpg",alt:"logo"})}),Object(m.jsxs)("div",{className:d.a.friendData__text,children:[Object(m.jsx)("h4",{style:{marginBottom:0},children:Object(m.jsx)(u.b,{to:"/profile/".concat(r),children:null===(i=b)||void 0===i?void 0:i.userName})}),Object(m.jsxs)("small",{style:{fontSize:"12px"},children:["Last activity: ",(null===(c=b)||void 0===c?void 0:c.lastUserActivityDate)&&Object(Y.a)(new Date(P))," ago"]})]})]}),o&&Object(m.jsx)(u.b,{to:"/dialogs",children:Object(m.jsx)(K.a,{style:{fontSize:34}})})]}),Object(m.jsxs)("div",{onScroll:function(e){var t=e.currentTarget;Math.round(t.scrollHeight-t.scrollTop)===t.clientHeight&&S(!0),0===t.scrollTop?B>=F.current&&(g(Object(h.g)(+r,F.current)),F.current++):S(!1)},style:{maxHeight:"400px",overflowY:"auto",background:"#2e2e2e",padding:"15px",marginBottom:"10px",height:400},children:[f.map((function(e,t){var s,n;return Object(m.jsx)(G,{photo:null===(s=b)||void 0===s||null===(n=s.photos)||void 0===n?void 0:n.small,date:e.date,items:e.items,userId:r},t)})),Object(m.jsx)("div",{ref:y,children:" "})]})]}):Object(m.jsx)(N.a,{fontSize:200})})};t.default=(T=function(){var e=Object(A.i)().userId;return Object(m.jsx)(m.Fragment,{children:window.matchMedia("(max-width:767px)").matches?Object(m.jsx)("div",{style:{display:"flex",flexDirection:"column",position:"relative"},children:e?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Q,{isMobileVersion:!0,userId:e}),Object(m.jsx)(k,{userId:e})]}):Object(m.jsx)(C,{isMobileVersion:!0})}):Object(m.jsxs)(i.a,{className:d.a.dialogsContainer,style:{border:"1px solid #dbdbdb"},children:[Object(m.jsx)(c.a,{span:6,children:Object(m.jsx)(C,{isMobileVersion:!1})}),Object(m.jsx)(c.a,{className:d.a.messageBlock,style:e?{}:{display:"flex",justifyContent:"center",alignItems:"center"},span:18,children:e?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Q,{userId:e}),Object(m.jsx)(k,{userId:e})]}):Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(m.jsx)("div",{style:{width:200,height:200,border:"1px solid #333",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)(z.SendOutlined,{style:{fontSize:80}})}),Object(m.jsx)("h2",{style:{fontSize:"1.5rem"},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0443 \u0443\u0433\u043e\u0434\u043d\u043e!"}),Object(m.jsx)(r.a,{style:{maxWidth:"max-content",margin:"0 auto"},type:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}),"                        "]})})},Object(l.b)(P)((function(e){var t=e.isAuth,s=Object(F.a)(e,["isAuth"]);return t?Object(m.jsx)(T,Object(B.a)({},s)):Object(m.jsx)(A.a,{to:"/login"})})))}}]);
//# sourceMappingURL=8.f829a609.chunk.js.map